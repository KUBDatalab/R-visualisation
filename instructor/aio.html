<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Visualising data using R: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/lc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/lc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/lc/favicon-16x16.png">
<link rel="manifest" href="../favicons/lc/site.webmanifest">
<link rel="mask-icon" href="../favicons/lc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Library Carpentry" src="../assets/images/library-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="../assets/images/library-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Visualising data using R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Visualising data using R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Visualising data using R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Before we Start</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="getting_started.html">2. Getting started</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="further_mapping.html">3. Further mapping</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="different_plots.html">4. Different types of plots</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="facets.html">5. Facetting</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="scaling-and-coordinates.html">6. Scaling and coordinates</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="theming.html">7. Theming</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="saving.html">8. Saving and exporting</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="whats-next.html">9. Whats next?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Before we Start</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/introduction.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“Why are we even visualizing?”</li>
<li>“What are the metadata of this dataset?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Get to know the importance of visualisations”</li>
<li>“Get to know the data we are going to work with”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>We have a slight problem with the column <code>color</code> in the
dataset, which can be confusing when we also have a <code>colour</code>
argument in play.</p>
<p>We try to be consistent in this material, and only use
<code>color</code> when referring to the variable, and the correct
spelling when referring to the arguments, or the phenomenon
“colour”.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-even-visualise-data">Why even visualise data?<a class="anchor" aria-label="anchor" href="#why-even-visualise-data"></a>
</h2>
<hr class="half-width">
<p>Data can be complex. Data can be confusing. And a good visualisation
of data can reduce some of that complexity and confusion.</p>
<p>A good visualisation can reveal patterns in our data.</p>
<p>A really good visualisation can even provide insight that is
difficult, or impossible to find without.</p>
<p>A good example is this map, where the English physician John Snow
plotted the deaths from Cholera in Soho, London from 19th august to 30th
September 1854. <img src="../fig/snow_cholera_map.jpg" alt="John Snow cholera map - Wellcome Trust, (CC BY 4.0)" class="figure"></p>
<p>The concentration of deaths indicated that the source of the disease
was a common water pump. Removing the handle from the pump brought an
end to the outbreak.</p>
<p>We are probably not going to discover patterns of equal importance in
this course.</p>
</section><section><h2 class="section-heading" id="the-dataset-we-are-working-with">The dataset we are working with<a class="anchor" aria-label="anchor" href="#the-dataset-we-are-working-with"></a>
</h2>
<hr class="half-width">
<p>We are going to study a dataset containing information on prices and
other attributes of 53940 diamonds. The dataset is included in the
<code>ggplot2</code> package, that we installed as part of
<code>tidyverse</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 10
  carat cut       color clarity depth table price     x     y     z
  &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48</code></pre>
</div>
<p>There are 10 variables in the dataset:</p>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>What is it?</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>carat</td>
<td>Weight of the diamond in carat (0.200 gram)</td>
</tr>
<tr class="even">
<td>cut</td>
<td>Quality of the cut of the diamond (Fair, Good, Very Good, Premium,
Ideal)</td>
</tr>
<tr class="odd">
<td>color</td>
<td>Colour of the diamond from D (best), to J (worst)</td>
</tr>
<tr class="even">
<td>clarity</td>
<td>How clear is the diamond. I1 (worst), SI2, SI1, VS2, VS1, VVS2,
VVS1, IF (best)</td>
</tr>
<tr class="odd">
<td>depth</td>
<td>Total depth percentage = z / mean(x, y)</td>
</tr>
<tr class="even">
<td>table</td>
<td>Width of the top of the diamond relative to its widest point</td>
</tr>
<tr class="odd">
<td>price</td>
<td>Price in US dollars</td>
</tr>
<tr class="even">
<td>x</td>
<td>Length in mm</td>
</tr>
<tr class="odd">
<td>y</td>
<td>Width in mm</td>
</tr>
<tr class="even">
<td>z</td>
<td>depth in mm</td>
</tr>
</tbody>
</table>
<p>Slightly more detailed information can be found in the help for the
dataset:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">diamonds</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="what-are-we-not-going-to-spend-time-on">What are we not going to spend time on?<a class="anchor" aria-label="anchor" href="#what-are-we-not-going-to-spend-time-on"></a>
</h2>
<hr class="half-width">
<p>There are often several considerations to take into account when we
plot.</p>
<p>Two of those, are not covered here:</p>
<ul>
<li>Is the plot suitable for the data we are working with?</li>
<li>Is the plot looking cool and impressive?</li>
</ul>
<p>We are not making art. And if a specific type of plot is useful, we
do not care if it is actually suitable for the diamond data we are
working with.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“This is not an introduction to R”</li>
<li>“Visualisation is a useful way of representing data”</li>
<li>“We are going to study diamonds!”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-getting_started"><p>Content from <a href="getting_started.html">Getting started</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/getting_started.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How do we build a plot with ggplot2?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Get to understand the layers in ggplot2”</li>
<li>“Make our first plot”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="the-grammar-of-graphics">The grammar of graphics<a class="anchor" aria-label="anchor" href="#the-grammar-of-graphics"></a>
</h2>
<hr class="half-width">
<p>Plotting using ggplot2 is based on “<a href="https://link.springer.com/book/10.1007/0-387-28695-0" class="external-link">The Grammar
of Graphics</a>”, a theoretical treatment of how to talk about and
conceptualize plots by Leland Wilkinson.</p>
<p>That theoretical treatise has been implemented in the package
ggplot2</p>
<p>We do not need to know or understand all details of this 620 page
book. But some weird naming conventions follows from this.</p>
<p>What we do need to know, is that based on the grammar of graphics,
the layered structure of a plot using ggplot, is build like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>)) <span class="sc">+</span> </span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span>(</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>     <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>),</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>     <span class="at">stat =</span> <span class="sc">&lt;</span>STAT<span class="sc">&gt;</span>, </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>     <span class="at">position =</span> <span class="sc">&lt;</span>POSITION<span class="sc">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="er">&lt;</span>COORDINATE_FUNCTION<span class="sc">&gt;</span> <span class="sc">+</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  <span class="er">&lt;</span>SCALE_FUNCTION<span class="sc">&gt;</span> <span class="sc">+</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  <span class="er">&lt;</span>FACET_FUNCTION<span class="sc">&gt;</span> <span class="sc">+</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  <span class="er">&lt;</span>THEME_FUNCTION<span class="sc">&gt;</span></span></code></pre>
</div>
<p>The “&lt;” and “&gt;” indicates that we should supply something
here.</p>
<p>We are going to cover each element in the following.</p>
<div id="what-is-the-difference" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-is-the-difference" class="callout-inner">
<h3 class="callout-title">What is the difference?</h3>
<div class="callout-content">
<p>ggplot2 is the library, containing different types of functions for
plotting, theming the plots, changing colours and lots of other
stuff.</p>
<p>ggplot is one of these functions in ggplot2, and the one that begins
every plot we make.</p>
<p>Yes it is confusing!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="ggplot-in-it-self">ggplot in it self<a class="anchor" aria-label="anchor" href="#ggplot-in-it-self"></a>
</h2>
<hr class="half-width">
<p>The first thing we need to provide for ggplot is some
<code>&lt;DATA&gt;</code>. We are working with the diamond dataset:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/getting_started-rendered-first_plot-1.png" style="display: block; margin: auto;" class="figure">
This in itself produces an extremely boring plot. But it is a plot, and
actually contains the data already. What is missing is information on
what exactly it is in the dataset we are trying to plot. How should our
data be <em>mapped</em> to the area of our plot? Or, what should we have
on the X-axis, and what should be on the Y-axis?</p>
<p>We provide that information to ggplot using the
<code>&lt;MAPPINGS&gt;</code> argument to the ggplot function. Here we
want to plot <code>carat</code> on the x-axis, and the
<code>price</code> on the y-axis:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/getting_started-rendered-second_plot_mapping-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We are not actually seeing any data, because we have not specified
the way the individual datapoints should be plotted. But we do see that
the axes now have values. The data has influenced the plot!</p>
<p>We would like to make a classic scatter plot, and do that by adding
the right <code>&lt;GEOM_FUNCTION&gt;</code> to our plot. The
<code>&lt;GEOM_FUNCTION&gt;</code> that do this, is called
<code>geom_points()</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/getting_started-rendered-second_plot_point-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Comparing with the original template, we did not place any mapping in
the <code>&lt;GEOM_FUNCTION&gt;</code> but rather in the first
<code>ggplot()</code> function. The <code>&lt;GEOM_FUNCTION&gt;</code>
will inherit the original mapping, if we do not provide a specific
mapping for it.</p>
<p>That means that:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>and</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>will yield the same result.</p>
<p>We can even provide the same mapping in both places.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>ggplot2 is a variation on the original grammar of graphics, called
<em>layered grammar of graphics</em>, where the individual parts of the
plot are added as layers, one on top of another. The <strong>+</strong>
sign adds these layers.</p>
<div id="geoms" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="geoms" class="callout-inner">
<h3 class="callout-title">geoms</h3>
<div class="callout-content">
<p>geom_point() is the function we use to make scatter plots; because
points is a geometric object. Other geometric objects can be plotted:
geom_histogram() will plot histograms geom_line() will plot lines</p>
<p>All geometries in ggplot2 are named using the pattern geom_</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="the-plus-sign">The plus sign<a class="anchor" aria-label="anchor" href="#the-plus-sign"></a>
</h2>
<hr class="half-width">
<p>The use of the <strong>+</strong> sign allows us to break up the code
producing the plot in multiple lines. This makes it easier to read (and
write!) the code producing the plot.</p>
<p>Note that the correct placement of <strong>+</strong> and linebreaks
are very important.</p>
<p>This code will work:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This will not add the new layer and will return an error message:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">+</span> <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Plot “carat” (the weight of the diamond) against “x” (the length of
the diamond). Make it a scatterplot</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Note that some outliers, probably erroneous data, are discovered. A
length of 0 is highly suspicious. Plots are also useful to reveal this
sort of things!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Plots in ggplot2 are build by adding layers</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-further_mapping"><p>Content from <a href="further_mapping.html">Further mapping</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/further_mapping.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“Can we show data using something other than position?”</li>
<li>“What is correct, colour or color?”</li>
<li>“How do I find out what a <code>geom_</code> can do?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to plot more than just positions”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We saw how to map data to a position in a scatterplot. But we are
able to map the data to other elements of a plot, eg the colour of the
points.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<figure><img src="../fig/further_mapping-rendered-more_mapping-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The argument to which we are mapping the values in the column
<em>color</em> is also called <em>colour</em>, making the code look a
bit weird.</p>
<p>Are these colours suitable? Probably not. The authors of this course
material are not able to distinguish all of the colours. We will return
to how to change colours in plots later in this course.</p>
<div id="spelling" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spelling" class="callout-inner">
<h3 class="callout-title">Spelling</h3>
<div class="callout-content">
<p>Colour, and some other words can be spelled in more than one way. For
arguments, ggplot understands both the correct english spelling
<em>colour</em> and the american spelling <em>color</em>.</p>
<p>Note that this only applies to the arguments in the functions. If the
column in the dataset is called <em>color</em>, ggplot will not find it
if you write <em>colour</em> instead.</p>
<p>In an attempt to reduce confusion, we use <em>colour</em> for the
arguments and <em>color</em> when we refer to the variable
<code>color</code>.</p>
</div>
</div>
</div>
<p>Not surprisingly, the “best” colour, D have higher prices than the
“worst” colour, “J”.</p>
<p>A common mistake is to place the colour argument a wrong place:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/further_mapping-rendered-chunk2-1.png" style="display: block; margin: auto;" class="figure">
What happened to the colour? The colour argument is outside the aes()
function. That means that we are not mapping data to the colour!</p>
<section><h2 class="section-heading" id="what-else-can-we-map-data-to">What else can we map data to?<a class="anchor" aria-label="anchor" href="#what-else-can-we-map-data-to"></a>
</h2>
<hr class="half-width">
<p>More or less every phenomenon in a scatter plot can have data mapped
to it, eg. the size of the points:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span>, size <span class="op">=</span> <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/further_mapping-rendered-unnamed-chunk-1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Not at good plot… We need to think about the combination of stuff we
want to plot. Often two plots are better than trying to cram everything
into a single plot.</p>
<p>What can be mapped to the plot depends on the geom we are using.</p>
<p>Calling the help function, eg <code>?geom_point</code>, on a geom
will provide insight on that question. Doing it on the
<code>geom_point()</code> function, reveals that x and y are mandatory
because they are in bold.</p>
<p>The list of stuff we can map data to in geom_point:</p>
<ul>
<li><strong>x</strong></li>
<li><strong>y</strong></li>
<li>alpha</li>
<li>colour</li>
<li>fill</li>
<li>group</li>
<li>shape</li>
<li>size</li>
<li>stroke</li>
</ul>
<p>Different geom_ functions have different mandatory/required
aesthetics.</p>
</section><section><h2 class="section-heading" id="not-really-mapping--sorta-">Not really mapping. Sorta.<a class="anchor" aria-label="anchor" href="#not-really-mapping--sorta-"></a>
</h2>
<hr class="half-width">
<p>Rather than mapping values from data to an aesthetic, we can provide
values directly. One very useful aesthetic to play with, at least when
we have as many datapoints as we have here, is <code>alpha</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/further_mapping-rendered-unnamed-chunk-2-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><code>alpha</code> controls the transparency of the points plotted,
and is a handy way of handling overplotting, the phenomenon that
multiple data points might be identical. In this example we set
<code>alpha</code> to be 0.1, we could have mapped a variable to it
instead.</p>
<div id="geoms" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="geoms" class="callout-inner">
<h3 class="callout-title">geoms</h3>
<div class="callout-content">
<p>geom_point() is the function we use to make scatter plots; because
points is a geometric object. Other geometric objects can be
plotted:</p>
<ul>
<li>geom_histogram() will plot histograms</li>
<li>geom_line() will plot lines</li>
</ul>
<p>All geometries in ggplot2 are named using the pattern geom_</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-shapes-in-the-plot">Using shapes in the plot<a class="anchor" aria-label="anchor" href="#using-shapes-in-the-plot"></a>
</h2>
<hr class="half-width">
<p>Shapes can be useful if we want to make plots that are robust in
regards to colour reproduction on screens, in printers or for people
with reduced colour vision. In principle we can plot any kind of shape.
But without having to program them ourself, these are available directly
in ggplot. They are numbered, because it is easier to write “14” than
“square box with upwardspointing triangle inside”.</p>
<figure><img src="../fig/further_mapping-rendered-point_shapes-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Data can be plottet as something other than position”</li>
<li>“Types of plots are determined by <code>geom_</code>functions”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-different_plots"><p>Content from <a href="different_plots.html">Different types of plots</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/different_plots.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What other types of plots can we make?</li>
<li>How can we control the order of stuff in plots?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to make histograms, barcharts, boxplots and
violinplots</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Scatterplots are very useful, but we often need other types of plots.
In this part of the course, we are going to look at some of the more
common types.</p>
<section><h2 class="section-heading" id="histograms">Histograms<a class="anchor" aria-label="anchor" href="#histograms"></a>
</h2>
<hr class="half-width">
<p>Histograms splits all observations of a variable up in a number of
“bins”. It counts how many observations are in each bin. Then we plot a
column with a height equivalent to the number of observations for each
bin.</p>
<p>Note that we here use the pipe to get the <code>diamonds</code> data
into <code>ggplot()</code>. Both methods can be used. However piping the
data into <code>ggplot()</code> is useful if we need to manipulate the
data before plotting, eg. by filtering it.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span><span class="va">carat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<figure><img src="../fig/different_plots-rendered-histogram-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Note that we get a warning from <code>geom_histogram</code> that the
number of bins by default is set to 30. 30 bins will almost never be the
correct number of bins, and we should chose a better value ourself.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/different_plots-rendered-adjust_bins-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>What number of bins should I choose? Some heuristics for choosing
does exists, but in general it is our recommendation that you experiment
with different number of bins to find the one that best shows your
data.</p>
<p>Note that we excluded the <code>mapping</code> part of the
<code>ggplot</code> function. The first argument of <code>ggplot</code>
is always data, and we can get that via the pipe. The second argument is
<em>always</em> mapping, and therefore we do not <em>need</em> to
specify it.</p>
<p>In the following we are sometimes going to specify the
<code>mapping</code> argument. There are two reasons for that. One: We
have forgotten to be consistent. Two: In some cases it is useful to
remind ourselves that we are actually mapping data to something.</p>
</section><section><h2 class="section-heading" id="barcharts">Barcharts<a class="anchor" aria-label="anchor" href="#barcharts"></a>
</h2>
<hr class="half-width">
<p>Not to be confused with histograms, barcharts count the number of
observations in different groups. Where the scale in histograms is
continuous, and split into bins, the scale in barcharts is discrete.</p>
<p>Here we map the <code>color</code>-variable to the x-axis in the
barchart. <code>geom_bar</code> counts the number of observations itself
- we do not need to provide a count:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/different_plots-rendered-bar_charts-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="a-small-excursion">A small excursion<a class="anchor" aria-label="anchor" href="#a-small-excursion"></a>
</h2>
<hr class="half-width">
<p>Why are the columns in the barchart above in that order?</p>
<p>One might guess that they are simply in alphabetical order.</p>
<p>Not so! <code>color</code> is a categorical variable. Diamonds either
have the colour “D” (which is the best colour), or another colour (like
“J”, which is the worst).</p>
<p>There are no “D.E” colours, they do not exist on a continuous
range.</p>
<p>This is called “factors” in R. The data in a factor can take one of
several values, called levels. And the order of these levels are what
control the order in the plot.</p>
<p>The order can be either arbitrary, or there can exist an implicit
order in the data, like with the colour of the diamonds, where D is the
best colour, and J is the worst. These types of ordered categorical data
are called ordinal data.</p>
<p>They look like this:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">cut</span>, <span class="va">color</span>, <span class="va">clarity</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>tibble [53,940 × 3] (S3: tbl_df/tbl/data.frame)
 $ cut    : Ord.factor w/ 5 levels "Fair"&lt;"Good"&lt;..: 5 4 2 4 2 3 3 3 1 3 ...
 $ color  : Ord.factor w/ 7 levels "D"&lt;"E"&lt;"F"&lt;"G"&lt;..: 2 2 2 6 7 7 6 5 2 5 ...
 $ clarity: Ord.factor w/ 8 levels "I1"&lt;"SI2"&lt;"SI1"&lt;..: 2 3 5 4 2 6 7 3 4 5 ...</code></pre>
</div>
<p>Note that even though the colour “D” is better than “E”, the levels
of the <code>color</code> factor indicates that “D&lt;E”.</p>
<p>All this just to say: We can control the order of columns in the
plot, by controlling the order of the levels of the categorical value we
are plotting:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>color <span class="op">=</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>  </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/different_plots-rendered-categorical_order-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><code>fct_rev</code> is a function that reverses the order of a
factor. It comes from the library <code>forcats</code> that makes it
easier to work with categorical data.</p>
</section><section><h2 class="section-heading" id="boxplots">Boxplots<a class="anchor" aria-label="anchor" href="#boxplots"></a>
</h2>
<hr class="half-width">
<p>Boxplots are suitable for visualising the distribution of data. We
can make a boxplot of a single variable in the data - or we can make
several boxplots in one plot:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/different_plots-rendered-boxplots-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we have the variable we are making boxplots of, on the x-axis,
and splitting them up in one plot per cut, on the y-axis.</p>
<div id="what-is-a-boxplot" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-is-a-boxplot" class="callout-inner">
<h3 class="callout-title">What is a boxplot?</h3>
<div class="callout-content">
<p>Boxplots are useful for showing different distributions. The fat line
in the middle of the box is the median, the two ends of the box is first
and third quartile, and the two whiskers (or lines) on both sides of the
box shows the minimum and maximum values - excluding outliers, defined
for this purpose as values that lies more that 1.5 times the
interquartile range from the box.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="violinplots">Violinplots<a class="anchor" aria-label="anchor" href="#violinplots"></a>
</h2>
<hr class="half-width">
<p>Boxplots are not necessarily the best option for showing
distributions. A good alternative could be violinplots. They show a
<em>density plot</em> - basically a histogram with infinite bins - for
each group, blotted symmetrically around an axis:</p>
<figure><img src="../fig/different_plots-rendered-violin_plot-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>The geom_ for making violin plots is <code>geom_violin</code> Look at
the help for <code>geom_violin</code> and make a violinplot with carat
on the x-axis, and cut on the y-axis.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, y <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_violin</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="and-many-more">And many more<a class="anchor" aria-label="anchor" href="#and-many-more"></a>
</h2>
<hr class="half-width">
<p>ggplot2 is born with a multitude of different plots. A complete list
of plots will be very long, and take up all the time for this course.
Take a look at <a href="https://r-graph-gallery.com/" class="external-link">The R Graph
Gallery</a> or at <a href="https://kubdatalab.github.io/R-graphs/" class="external-link">Graphs in R</a> (NB a work
in progress), where we will collect weird and wonderful plots, when to
use them, when not to use them. And how to make them.</p>
<p>ggplot2 is written as an extensible package, meaning that developers
can create packages making plots that are not included in ggplot2, or
introduce more advanced functionality around plots. Two of the more
interesting extensions are:</p>
<p><code>ggforce</code> extends ggplot2 with specialised plottypes.</p>
<p><code>gganimate</code> makes it easyish to make animated plots using
ggplot2</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Categorical data, aka factors can control the order of data in
plots”</li>
<li>“ggplot makes it easy to make many different types of plots”</li>
<li>“ggplot have many useful extensions”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-facets"><p>Content from <a href="facets.html">Facetting</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/facets.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is facetting?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to use small multiples in your plots”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="small-multiples">Small multiples<a class="anchor" aria-label="anchor" href="#small-multiples"></a>
</h2>
<hr class="half-width">
<p>If we only make one plot we quickly runs into the problem of trying
to plot too much information in the plot. Here we plot the price against
carat, colour by the <code>color</code> of the diamonds. And represent
their clarity by the shape of the points:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span>, shape <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Using shapes for an ordinal variable is not advised</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: The shape palette can deal with a maximum of 6 discrete values because more
than 6 becomes difficult to discriminate
ℹ you have requested 8 values. Consider specifying shapes manually if you need
  that many of them.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 5445 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<figure><img src="../fig/facets-rendered-too_much_in_plot-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>This is probably not the best way to discover patterns in the data.
It is actually so bad that ggplot warns us that we are using too many
different shapes!</p>
<p>One way of handling that, is to plot “small multiples” of the
data.</p>
<p>Instead of plotting information on the clarity of the diamonds in one
plot, along with all the other information, we make one plot for each
value of clarity. This is called facetting:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">clarity</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/facets-rendered-first_facet-1.png" style="display: block; margin: auto;" class="figure">
Here we can see that the price rises more rapidly with size, for the
better clarities, something that would have been impossible to see in
the previous plot.</p>
<div id="hidden-connections" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="hidden-connections" class="callout-inner">
<h3 class="callout-title">Hidden connections</h3>
<div class="callout-content">
<p>facet_wrap is specified using the <code>~clarity</code> notation.</p>
<p>This is similar to the way R specifies formulas:</p>
<p>y ~ x would in eg. regressions in R specify that y is a function of
x.</p>
<p>Here we can think of it as “making plots that are a function of
clarity”</p>
</div>
</div>
</div>
<p>The fundamental idea behind faceting, is the concept “small
multiples”, popularised by Edward Tufte. He describes it as (resembling)
“the frames of a movie: a series of graphics, showing the same
combination of variables, indexed by changes in another variable.” The
method is also known as “trellis”, “lattice”, “grid” or “panel” charts.
They allows us to break down a very “busy” chart, containing too much
information, making it possible for the reader of the charts to walk
through them one category at a time, and make comparisons.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Plot price as a function of depth (price on the y-axis, depth on the
x-axis), and facet by cut. If you want a colourful plot, colour the
points by <code>color</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">depth</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">cut</span><span class="op">)</span></span></code></pre>
</div>
<p>Note that for the better cuts, diamonds are cut to pretty specific
proportions. Worse (Fair) diamonds have more varied proportions.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="more-than-one-multiple">More than one multiple<a class="anchor" aria-label="anchor" href="#more-than-one-multiple"></a>
</h2>
<hr class="half-width">
<p>We can expand on the “small multiple” concept, by plotting the facets
in a grid, defined by two categorical values.</p>
<p>In this plot we plot price as a function of carate, and make
individual plots for each combination of <code>clarity</code> and
<code>color</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">facet_grid</span><span class="op">(</span><span class="va">clarity</span> <span class="op">~</span> <span class="va">color</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/facets-rendered-facet_grid-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Be careful using facets, especially <em>facet_grid</em> when you work
with small datasets. You might end up with too little data in each
facet.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Facetting can make busy plots more understandable”</li>
<li>“Grid facetting in two dimensions allows us to plot even more
variables”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-scaling-and-coordinates"><p>Content from <a href="scaling-and-coordinates.html">Scaling and coordinates</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/scaling-and-coordinates.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can we adjust the scales in a plot?”</li>
<li>“How can we zoom-in to specific parts of a plot?”</li>
<li>“How can we change the colours of the plot?”</li>
<li>“How do I make a pie-chart?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to zoom by adjusting scales”</li>
<li>“Learn how to make log-scale plots”</li>
<li>“Learn why you should not make a pie-chart”</li>
<li>“Learn how to control the colour-scale”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="changing-scale-and-coordinates">Changing scale and coordinates<a class="anchor" aria-label="anchor" href="#changing-scale-and-coordinates"></a>
</h2>
<hr class="half-width">
<p>ggplot chooses a coordinate system for us. Like bins in histograms,
that coordinate system might not be the right one for our data.</p>
<p>One of the more commonly cited “rules” for plots and graphs is that
the coordinate system should begin at zero. And ggplot does not
necessarily give us a coordinate system that begins at zero. So how do
we force it to?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-coordinate_origo_1-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can control the axes precisely by adding xlim and/or ylim to the
plot. We need to provide these functions with a vector of length 2,
indicating the minimum and maximum values we want:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlim</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">80</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylim</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-coordinate_origo_2-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>It is nice to be able to control the two axes seperately. Because the
coordinate system should not always begin at zero. Especially
time-series, showing a development over time, should often <em>not</em>
begin at zero.</p>
<div class="section level3">
<h3 id="zooming">Zooming<a class="anchor" aria-label="anchor" href="#zooming"></a>
</h3>
<p>Let us zoom in on the plot above, and look at tables between 50 and
70, by adjusting the ylim:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylim</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">50</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 12 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-zooming-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>That returns a warning! Some data is not within the limits we placed
on the y-axis. This might not be a problem. Or it might.</p>
<p>If we are doing more advanced stuff like scaling the axes (eg.
logarithmically), cutting of data might be a bad idea.</p>
<p>Zooming in on particular areas of the plot is done better using the
<code>coord_cartesian</code> function:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">50</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-cartesian-zoom-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>This will not cut out data from the plot, they are still there for
other geoms that might need them, they are simply not plotted.</p>
</div>
<div class="section level3">
<h3 id="why-would-that-be-a-problem">Why would that be a problem?<a class="anchor" aria-label="anchor" href="#why-would-that-be-a-problem"></a>
</h3>
<p>That would be a problem, because the <code>ylim</code> approach
removes data before the plot is actually made. Functions that would use
these removed data will no longer have access to them. Let us show -
without going deep into what is actually happening, the difference.</p>
<p>We can add a smoothing function to a plot, that adds a trendline to
the data. This “smoother” is based on all the data available to it. Let
us make two plots, one where we zoom using <code>ylim</code>, and one
where we zoom using <code>coord_cartesian</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">patchwork</span><span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylim</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="fl">50</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Zoom by ylim"</span>, subtitle <span class="op">=</span> <span class="st">"Smooth only uses a subset of data"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">depth</span>, <span class="va">table</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">50</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Zoom by coord_cartesian"</span>, subtitle <span class="op">=</span> <span class="st">"Smooth uses all data"</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 12 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 12 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<p><img src="../fig/scaling-and-coordinates-rendered-zoom_comparison-1.png" style="display: block; margin: auto;" class="figure">
The trendlines are very different, because the data they are based on,
is different. Also note that we get one set of warnings about missing
data. When we zoom using <code>ylim</code> both
<code>geom_smooth</code>, and <code>geom_point</code> are missing data.
When we zoom using <code>coord_cartesian</code> they have access to all
data - but do not plot it.</p>
</div>
</section><section><h2 class="section-heading" id="changing-the-coordinate-system">Changing the coordinate system<a class="anchor" aria-label="anchor" href="#changing-the-coordinate-system"></a>
</h2>
<hr class="half-width">
<p>We saw above that we could adjust the coordinate system in order to
zoom in on specific parts of the plot. We can do other things with the
coordinate system!</p>
<p>Should we want to flip the coordinates, we could interchange the x
and y values in the mapping argument. Or we could add a coordinate
function that changes the coordinate system:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-flipped-coords-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Other coord_ functions exists, that does more advanced
transformations of the coordinate system.</p>
<div class="section level3">
<h3 id="log-scale">Log-scale<a class="anchor" aria-label="anchor" href="#log-scale"></a>
</h3>
<p>With data that span several orders of magnitude, it is often useful
to plot it in a logarithmic or double-logarithmic coordinate system.
That might reveal structure in the data that is otherwise invisible.</p>
<p>And sometimes, eg in chemistry studying reaction kinetics, we use
logarithmic scales to address logarithms in the model we have for our
data.</p>
<p>By default ggplot comes with the function <code>scale_y_log10</code>
that will transform the y-axis to a logarithmic scale using base 10 for
the logarithm. The equivalent function <code>scale_x_log10</code> does
the same for the x-axis. If you need the natural logarithm, you will
need to look into the package <code>scales</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/scaling-and-coordinates-rendered-log-transform-y-1.png" style="display: block; margin: auto;" class="figure">
This plot reveals a gap in the prices. There are no diamonds in this
dataset with a price between 1454 USD and 1546 USD. The educated guess
is an error in the original dataset.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">exercise</h3>
<div class="callout-content">
<p>Try to plot price against carat (carat on the x-axis, and price on
y-axis) with both axes log transformed.</p>
<p>What new insights do we gain?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">depth</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>The correlation between carat and price appears to be roughly linear
(with a lot of noise) then both carat and price are log transformed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="pie-charts---the-forbidden-charts">Pie charts - the forbidden charts<a class="anchor" aria-label="anchor" href="#pie-charts---the-forbidden-charts"></a>
</h3>
<p>A very popular plot type is pie charts. Pie charts in ggplot can be
defined by making a stacked bar-chart, and changing the coordinate
system to polar.</p>
<p>We begin by filtering the data set to only include diamonds with the
<code>color</code> “G”, and then make a barchart. We add the argument
<code>position = "stack"</code> to <code>geom_bar</code> to stack the
bars rather than having them side by side. And then we adjust the
coordinate system to be polar (the y-axis specifically), beginning at
0:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>color <span class="op">=</span> <span class="fu">as.character</span><span class="op">(</span><span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">color</span> <span class="op">==</span> <span class="st">"G"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">color</span>, fill <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_polar</span><span class="op">(</span><span class="st">"y"</span>, start<span class="op">=</span><span class="fl">0</span><span class="op">)</span> </span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-pie_chart-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> What are polar coordinates? </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>Our ordinary coordinate system is a cartesian coordinate system. Each
point in the system are defined by two values, X and Y, representing the
distance from the origin or reference point of the coordinate
system.</p>
<p>In a polar coordinate system, each point in the plane is defined by
two values: radius (r) and angle (θ). The radius represents the distance
from a reference point (called the pole) to the point in question, and
the angle is the angle formed between the positive x-axis (in ggplot2,
this is usually the horizontal axis) and the line connecting the pole to
the point.</p>
<p>In a polar coordinate system, we still have a point of origin, 0,0
but now the points are plottet using an angle from the x-axis and a
distance</p>
</div>
</div>
</div>
</div>
<div id="why-does-geom_pie-not-exist" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-does-geom_pie-not-exist" class="callout-inner">
<h3 class="callout-title">Why does geom_pie() not exist?</h3>
<div class="callout-content">
<p>ggplot2 is an opinionated package. It forces us to think about
including 0,0 in our plots. When we make histograms, the number of bins
are chosen to be particularly bad, so we have to choose something
different.</p>
<p>And piecharts are a very bad idea. They map values to an angle in the
plot, and humans are not very good at seeing the difference between two
angles.</p>
<p>Rare exceptions exists. But making pie charts should be done with
EXTREME caution.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="colouring-the-scale">Colouring the scale<a class="anchor" aria-label="anchor" href="#colouring-the-scale"></a>
</h2>
<hr class="half-width">
<p>Looking at the plot below, the authors of this course get pretty
frustrated.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-scale_colour-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We are not really able to distinquish the colour for “D” and “E”. Or
for “G” and “H”. Controlling the colours is important not only for
aesthetic reasons, but also for actually illustrating what the plot is
showing.</p>
<p>Here, the colour is introduced by mapping the <code>color</code> of
the diamonds to the colouring of the points. This actually is mapping a
value to a scale, no different from the mapping of the price to the
y-axis.</p>
<p>In the same way we can adjust the scale of the y-axis as shown above,
we are able to adjust the actual colours in the plot.</p>
<p>The functions for this are (almost) all called <code>scale_</code>
and then continues with <code>colour</code> if we are colouring points,
<code>fill</code> if we want to control the fill-colour of a solid
object in the plot, and finally something that specifies either the type
of data we are plotting, or specific functionality to control the
colour.</p>
<p>Below we adjust the colour using the special family of functions
<code>brewer</code>: <code>scale_colour_brewer</code>. Nice colours, but
even worse:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_colour_brewer</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/scaling-and-coordinates-rendered-colour_brewer-1.png" style="display: block; margin: auto;" class="figure">
What we did to change the background will be covered in the next
episode.</p>
<p>Finding the optimal colours usually requires a lot of fiddling
around. Rather than using functions to choose the colours, we can choose
them manually, like this:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span>, colour <span class="op">=</span> <span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_colour_manual</span><span class="op">(</span>values<span class="op">=</span><span class="fu">c</span><span class="op">(</span><span class="st">'#7fc97f'</span>,<span class="st">'#beaed4'</span>,<span class="st">'#fdc086'</span>,<span class="st">'#ffff99'</span>,<span class="st">'#386cb0'</span>,<span class="st">'#f0027f'</span>,<span class="st">'#bf5b17'</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/scaling-and-coordinates-rendered-manual_colours-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The codes #7fc97f are “hex-codes”, specifying the colours. You can
find websites allowing you to chose a colour, and get the code. A good
place to get suggestions for colour-pallettes is <a href="https://colorbrewer2.org/" class="external-link">Colorbrewer2</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Pie charts are a bad idea!”</li>
<li>“Zooming might exclude data if done wrong”</li>
<li>“Play around to find the colours you like”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-theming"><p>Content from <a href="theming.html">Theming</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/theming.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can I make the plot look good?”</li>
<li>“How do I get rid of that grey background?”</li>
<li>“How do I get rid of the gridlines?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to use different themes”</li>
<li>“Learn to adjust the appearance of specific parts of the plot”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="the-theme_functions">The THEME_FUNCTIONs<a class="anchor" aria-label="anchor" href="#the-theme_functions"></a>
</h3>
<p>Every part of the plot can be changed. The grey background might be
annoying The gridlines might be confusing.</p>
<p>These non-data components of the plots can be controlled using the
family of <code>theme</code> functions:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/theming-rendered-theme_bw-1.png" style="display: block; margin: auto;" class="figure">
More exists:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in default | bw: operations are possible only for numeric, logical or complex types</code></pre>
</div>
<div id="notice-the-pattern" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="notice-the-pattern" class="callout-inner">
<h3 class="callout-title">Notice the pattern?</h3>
<div class="callout-content">
<p>A general pattern of function names in ggplot2 can be seen.</p>
<p>Themes are named “theme_” and then the name of the theme. We saw the
same pattern with the scale functions: “scale_” and then the axis,
followed by what we did to the axis, eg: “scale_y_log10”</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="even-more-theming">Even more theming<a class="anchor" aria-label="anchor" href="#even-more-theming"></a>
</h3>
<p><em>Every</em> element in the plot can be controlled. The
<code>theme()</code> function is the way to do that:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dark</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle<span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/theming-rendered-theming-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Angling the labels in a plot can be good for readability. However the
actual way to do it can be a bit more involved as you see above. Read
the help for theme to get at complete list of things that can be
changed. There are 97 things in total.</p>
<p>Also note, that we can add theming on top of previous theming. Here
we begin with a built-in theme that we like, and change the parts we
want to change.</p>
<p>Finally note, that the order is important:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dark</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle<span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>and</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle<span class="op">=</span> <span class="fl">45</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dark</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<p>Will not give the same result. <code>theme_dark</code> has a setting
for the way the text on the y-axis is shown, and will overwrite the
changes done before calling it.</p>
<p>Most of the <code>elements</code> of the plot need to be defined in a
special way. If we want the “theme” a text element, we set the
<code>axis.text</code> to be an <code>element_text()</code> function
with specific arguments to specify <em>what</em> we want to do. For the
background of the plot we are changing a rectangular object
<code>element_rect</code>, and can set the background colour like
this:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">carat</span>, <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle<span class="op">=</span> <span class="fl">45</span><span class="op">)</span>,</span>
<span>        panel.background <span class="op">=</span> <span class="fu">element_rect</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/theming-rendered-background-1.png" style="display: block; margin: auto;" class="figure">
Note that we are not setting the <code>plot.background</code>, as that
would change the background of the entire plot, rather than the
background of the actual area on which we are plotting.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“EVERYTHING in the plot can be customized”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div></section><section id="aio-saving"><p>Content from <a href="saving.html">Saving and exporting</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/saving.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 5 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How can I save the plots?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn how to save your plots in different formats”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="it-would-be-nice-to-be-able-to-save-the-plot-">It would be nice to be able to save the plot.<a class="anchor" aria-label="anchor" href="#it-would-be-nice-to-be-able-to-save-the-plot-"></a>
</h2>
<hr class="half-width">
<p>Saving a plot can be done directly from the plot pane in RStudio <img src="../fig/08-saving-plot.png" alt="Saving from Rstudio" class="figure"></p>
<p>ggplot2 also includes a function for saving the last plot you made.
This function will save it as “myimage.png” in your current directory.
The image will be 800x600 pixels (px) in size, and with a resolution of
300 dpi.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsave</span><span class="op">(</span><span class="st">"myimage.png"</span>, width <span class="op">=</span> <span class="fl">800</span>, </span>
<span>       height <span class="op">=</span> <span class="fl">600</span>, units <span class="op">=</span> <span class="st">"px"</span>,</span>
<span>       dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre>
</div>
<p>However, this does not look very nice: <img src="../fig/myimage.png" alt="Nasty looking" class="figure"> The points are too big for the plot!</p>
<p>Be prepared for a lot of fiddling about with your plots if you want
to use <code>ggsave()</code>.</p>
<p>Adjusting size, and getting af nice image is often easier adjusting
the size of the plot pane directly in RStudio.</p>
<p>The saved image will reflect what you see on the screen.</p>
</section><section><h2 class="section-heading" id="there-is-more-than-jpg-and-png-in-the-world">There is more than JPG and PNG in the world!<a class="anchor" aria-label="anchor" href="#there-is-more-than-jpg-and-png-in-the-world"></a>
</h2>
<hr class="half-width">
<p>JPG is a popular format for saving images. It produces nice, small
files. PNG is also a popular format for images.</p>
<p>By default, ggsave is able to recognize the extension you give your
file name (.png in the example above), and save to these formats:</p>
<ul>
<li>eps</li>
<li>ps</li>
<li>tex</li>
<li>pdf</li>
<li>jpeg/jpg</li>
<li>tiff</li>
<li>png</li>
<li>bmp</li>
<li>svg</li>
<li>wmf (only on windows)</li>
</ul>
<p>We would like to recommend the “svg” format. That format is a
“vector-based” format that you can scale to any size you want.</p>
<div class="keypoints:">
<ul>
<li>“The easiest way to adjust the size of your saved plots is by
adjusting the plot window in RStudio”</li>
</ul>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-whats-next"><p>Content from <a href="whats-next.html">Whats next?</a></p>
<hr>
<p>Last updated on 2025-07-15 |

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/episodes/whats-next.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is the next step in learning to plot?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Provide tips on where to locate data for plotting”</li>
<li>“Provide tips for finding inspiration for plotting”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-should-i-do-next">What should I do next?<a class="anchor" aria-label="anchor" href="#what-should-i-do-next"></a>
</h2>
<hr class="half-width">
<p>First of all: If you do not have data you want to visualise already.
Find some!</p>
<p><a href="https://www.kaggle.com/datasets" class="external-link">Kaggle</a> host
competitions in machine learning. For the use of those competitions,
they give access to a lot of interesting datasets to work with. With
more than 200.000 datasets at time of writing, it can be a bit
overwhelming, so consider looking at the “<a href="https://www.kaggle.com/datasets?fileType=csv&amp;tags=13208-Data+Visualization" class="external-link">Data
Visualization</a>” category. The link provided only shows datasets saved
as CSV-files, and has only about 2.500 datasets.</p>
</section><section><h2 class="section-heading" id="play-around">Play around!<a class="anchor" aria-label="anchor" href="#play-around"></a>
</h2>
<hr class="half-width">
<p>ggplot2 comes with a lot of functionality. This is the list of
build-in geoms in ggplot2:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "geom_abline"            "geom_area"              "geom_bar"
 [4] "geom_bin_2d"            "geom_bin2d"             "geom_blank"
 [7] "geom_boxplot"           "geom_col"               "geom_contour"
[10] "geom_contour_filled"    "geom_count"             "geom_crossbar"
[13] "geom_curve"             "geom_density"           "geom_density_2d"
[16] "geom_density_2d_filled" "geom_density2d"         "geom_density2d_filled"
[19] "geom_dotplot"           "geom_errorbar"          "geom_errorbarh"
[22] "geom_freqpoly"          "geom_function"          "geom_hex"
[25] "geom_histogram"         "geom_hline"             "geom_jitter"
[28] "geom_label"             "geom_line"              "geom_linerange"
[31] "geom_map"               "geom_path"              "geom_point"
[34] "geom_pointrange"        "geom_polygon"           "geom_qq"
[37] "geom_qq_line"           "geom_quantile"          "geom_raster"
[40] "geom_rect"              "geom_ribbon"            "geom_rug"
[43] "geom_segment"           "geom_sf"                "geom_sf_label"
[46] "geom_sf_text"           "geom_smooth"            "geom_spoke"
[49] "geom_step"              "geom_text"              "geom_tile"
[52] "geom_violin"            "geom_vline"            </code></pre>
</div>
<p>ggplot2 is also build as an extensible package, making it relatively
easy to build extensions, that does things that ggplot2 is not able to
on its own. <a href="https://exts.ggplot2.tidyverse.org/" class="external-link">This page</a>
contains a collection of these.</p>
</section><section><h2 class="section-heading" id="get-some-inspiration">Get some inspiration!<a class="anchor" aria-label="anchor" href="#get-some-inspiration"></a>
</h2>
<hr class="half-width">
<p>The website/book <a href="https://clauswilke.com/dataviz/" class="external-link">Fundamentals of Data
Visualization</a> is a great resource for tips, tricks and thinking
about visualizations, especially the <a href="https://clauswilke.com/dataviz/directory-of-visualizations.html" class="external-link">directory
of visualizations</a>. Note, however, that the author does not provide
examples of the code you need to write to make the plots.</p>
<p>There exist an online challenge, <a href="https://30daychartchallenge.org/" class="external-link">#30DayChartChallenge</a>, that
challenges you to create a data visualization on a certain topic each
day of april. That can be a bit of a mouthful and we are not going to
participate ourselves. But! The collection of visualizations from 2022
is humongous, and a great place to find ideas.</p>
<p>Sometimes you have a pretty good idea about what you want to
visualise. But you are uncertain about what graphs might be used for
that. Or you know what graph you want to make, but can’t quite figure
out how to write the code. <a href="https://r-graph-gallery.com/" class="external-link">The R
Graph Gallery</a> have a wide selection of chart types with code!</p>
</section><section><h2 class="section-heading" id="other-online-courses">Other online courses<a class="anchor" aria-label="anchor" href="#other-online-courses"></a>
</h2>
<hr class="half-width">
<p><a href="https://www.edx.org/search?q=ggplot" class="external-link">EdX</a> offers a
multitude of interesting courses - here we link to their ggplot-related
courses.</p>
<p>Codecademy also offers free courses (and a certificate of completion
if you pay) <a href="https://www.codecademy.com/learn/learn-ggplot-2" class="external-link">This course</a>
offers a more indepth introduction to ggplot2.</p>
</section><section><h2 class="section-heading" id="extensions">Extensions<a class="anchor" aria-label="anchor" href="#extensions"></a>
</h2>
<hr class="half-width">
<p>ggplot2 is build for extensions. And there are many.</p>
<ul>
<li>(Hack for ggplot)[<a href="https://teunbrand.github.io/ggh4x/" class="external-link uri">https://teunbrand.github.io/ggh4x/</a>] A packages with
utilities for doing stuff on the edge of what ggplot is designed
for.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“ggplot2 is extensible - a LOT of extensions are available”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/kubdatalab/R-visualisation_new/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/kubdatalab/R-visualisation_new/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/kubdatalab/R-visualisation_new/" class="external-link">Source</a></p>
				<p><a href="https://github.com/kubdatalab/R-visualisation_new/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:kubdatalab@kb.dk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC BY-NC-SA 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://kubdatalab.github.io/R-visualisation_new/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, KUB Datalab",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://kubdatalab.github.io/R-visualisation_new/instructor/aio.html",
  "identifier": "https://kubdatalab.github.io/R-visualisation_new/instructor/aio.html",
  "dateCreated": "2024-07-31",
  "dateModified": "2025-07-15",
  "datePublished": "2025-07-15"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

